"""
Author: ë¬¸ì§€ì˜
Date: 2025-10-22
Description: íì°¨ì¥ ìœ„ì¹˜ ê²€ìƒ‰ í™”ë©´
"""

# Data í™”ë©´ ì¶œë ¥ì„ ìœ„í•œ streamlit ì½”ë“œ ì‘ì„±.
# TODO ì§€ì˜ë‹˜ Streamlit í™œìš©í•˜ì—¬ í™”ë©´ ì‘ì„± í•„ìš”.

import streamlit as st
import pandas as pd


# ì§€ì—­ë³„ë¡œ í–ˆì„ ë•Œ ê°¯ìˆ˜ 
# í˜ì´ì§€ ì²˜ë¦¬í•˜ê¸°. 
# ë§Œì•½ ì¡°íšŒí–ˆëŠ”ë° 50ê°œ ë‚˜ì˜¤ë©´ í•œ í™”ë©´ì´ ì•„ë‹ˆë¼ ì„ì˜ë¡œ 5ê°œ ì •ë„ ì„¤ì •í•˜ê³  
# í…Œì´ë¸” ë°•ìŠ¤ë¡œ ì¤„í…ë° ë™ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ê¸°. ê¸¸ë©´ ë§ì¶°ì§€ê²Œë”. 

# ì—…ì²´ëª… ëˆ„ë¥´ë©´ ì§€ë„ì— ì°íˆê²Œ.



# 1. í˜ì´ì§€ ì„¤ì •
st.set_page_config(
    page_title="ìˆ˜ë„ê¶Œ íì°¨ì¥ ì¡°íšŒ ë° FAQ ì‹œìŠ¤í…œ",
    page_icon="ğŸš™",
    layout="wide",
    initial_sidebar_state="expanded"
)


# 2. ì‚¬ì´ë“œë°” ë©”ë‰´ êµ¬í˜„
st.sidebar.title("ğŸ› ï¸ ì‹œìŠ¤í…œ ë©”ë‰´")
menu = st.sidebar.radio(
    " ì›í•˜ëŠ” ì„œë¹„ìŠ¤ë¥¼ ì„ íƒí•˜ì„¸ìš”: ",
    ('íì°¨ì¥ ì¡°íšŒ', 'FAQ ê²€ìƒ‰ ì‹œìŠ¤í…œ', 'í†µê³„ ì‹œê°í™”', 'SQL ì§ˆì˜ ì§„í–‰')
)


# 3. ë©”ì¸ ì½˜í…ì¸  í•¨ìˆ˜ ì •ì˜
def show_scrapyard_finder():
    """ íì°¨ì¥ ì¡°íšŒ í˜ì´ì§€ """
    st.header ("ğŸ“ìˆ˜ë„ê¶Œ íì°¨ì¥ ì¡°íšŒ")
    st.write("ì§€ì—­ ë˜ëŠ” ì—…ì²´ëª…ìœ¼ë¡œ ë“±ë¡ëœ íì°¨ì¥ ì •ë³´ë¥¼ ê²€ìƒ‰í•˜ì„¸ìš”.")

    col1, col2 = st.columns(2)

    with col1:
        selected_area = st.selectbox(
            "ì§€ì—­ë³„ ê²€ìƒ‰",
            ['ì „ì²´', 'ì„œìš¸', 'ê²½ê¸°', 'ì¸ì²œ'],
            index = 0   # ê¸°ë³¸ê°’ 'ì „ì²´'
        )
    with col2:
        search_name = st.text_input("ì—…ì²´ëª… ê²€ìƒ‰ (í‚¤ì›Œë“œ)", max_chars=50)




def show_faq_system():
    """[2] FAQ ê²€ìƒ‰ ì‹œìŠ¤í…œ í˜ì´ì§€"""
    st.header("â“ íì°¨ ê´€ë ¨ ìì£¼ ë¬»ëŠ” ì§ˆë¬¸ (FAQ)")
    st.write("ê¶ê¸ˆí•œ í‚¤ì›Œë“œë¥¼ ì…ë ¥í•˜ì‹œë©´ ê´€ë ¨ëœ ì§ˆë¬¸ê³¼ ë‹µë³€ì„ ì°¾ì•„ë“œë¦½ë‹ˆë‹¤.")
    
    # ì‚¬ìš©ì ì…ë ¥: ê²€ìƒ‰ í‚¤ì›Œë“œ ìœ„ì ¯
    keyword = st.text_input("ê²€ìƒ‰ í‚¤ì›Œë“œ ì…ë ¥", max_chars=50, key="faq_keyword")
    
    if st.button("FAQ ê²€ìƒ‰"):
        if keyword:
            # ğŸš¨ DB í•¨ìˆ˜ í˜¸ì¶œ (í˜„ì¬ëŠ” Mock í•¨ìˆ˜ ì‚¬ìš©)
            faq_list = search_faq(keyword)
            
            if faq_list:
                st.info(f"'{keyword}'ì™€(ê³¼) ê´€ë ¨ëœ FAQ **{len(faq_list)}** ê±´ì´ ê²€ìƒ‰ë˜ì—ˆìŠµë‹ˆë‹¤.")
                
                # ê²€ìƒ‰ ê²°ê³¼ë¥¼ í™•ì¥ ê°€ëŠ¥í•œ í˜•íƒœë¡œ ì¶œë ¥
                for i, item in enumerate(faq_list):
                    # st.expanderë¥¼ ì‚¬ìš©í•˜ì—¬ ë‹µë³€ì„ ìˆ¨ê²¨ ì‚¬ìš©ì ê²½í—˜ í–¥ìƒ
                    with st.expander(f"**Q{i+1}.** {item['Q']}"):
                        st.markdown(f"**A.** {item['A']}")
                        st.caption(f"**ì¶œì²˜:** {item['ì¶œì²˜']}") # ì¶œì²˜ í‘œê¸°
            else:
                st.warning(f"'{keyword}'ì™€(ê³¼) ê´€ë ¨ëœ ì§ˆë¬¸ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")
        else:
            st.error("ê²€ìƒ‰ í‚¤ì›Œë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.")



# 4. ë©”ì¸ ë¼ìš°íŒ… 
if menu == 'íì°¨ì¥ ì¡°íšŒ':
    show_scrapyard_finder()
elif menu == 'FAQ ê²€ìƒ‰ ì‹œìŠ¤í…œ':
    show_faq_system()



