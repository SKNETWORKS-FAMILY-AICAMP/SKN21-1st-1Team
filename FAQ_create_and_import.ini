
##### csv 파밀 만들기

import csv
from pathlib import Path

CSV_PATH = Path("FAQ.csv")  # 파일명 설정
FIELDNAMES = ["id", "question", "answer"]  # id, question, answer 칼럼명

def init_csv(path=CSV_PATH):
    if not path.exists():
        with path.open("w", newline="", encoding="utf-8") as f:
            writer = csv.DictWriter(f, fieldnames=FIELDNAMES)
            writer.writeheader()

def read_all(path=CSV_PATH):
    init_csv(path)
    with path.open("r", newline="", encoding="utf-8") as f:
        reader = csv.DictReader(f)
        return list(reader)

def next_id(rows):
    if not rows:
        return 1
    return max(int(r["id"]) for r in rows) + 1

def add_qa(question, answer, path=CSV_PATH):
    init_csv(path)
    rows = read_all(path)
    record = {
        "id": str(next_id(rows)),
        "question": question,
        "answer": answer
    }
    with path.open("a", newline="", encoding="utf-8") as f:
        writer = csv.DictWriter(f, fieldnames=FIELDNAMES)
        writer.writerow(record)
    return record

def find_by_id(record_id, path=CSV_PATH):
    for r in read_all(path):
        if r["id"] == str(record_id):
            return r
    return None

def find_by_keyword(keyword, path=CSV_PATH):
    keyword = keyword.lower()
    results = []
    for r in read_all(path):
        if keyword in r["question"].lower() or keyword in r["answer"].lower():
            results.append(r)
    return results

if __name__ == "__main__":
    init_csv()
    add_qa(",   
           "")  # question과 answer를 원하는 내용으로 채우세요(,로 구분)
    print(read_all()) # 파이썬으로 어떤 내용이 들어갔는지 확인




    #########################################################################


# SQL에 import 방법


%pip install pymysql # pymysql 설치

# 테이블 생성(필요하면 한 번만 실행)
create_sql = """CREATE TABLE FAQ (
  id INT PRIMARY KEY,
  question TEXT,
  answer TEXT
)"""




import pymysql

# MySQL 접속 정보 수정
conn = pymysql.connect(host="127.0.0.1", port=3306, user="", password="1111", db="testdb", charset='utf8mb4')
cur = conn.cursor()

cur.execute(create_sql)
datas = [
[1, "관허 폐차장이 아닌 곳에서 폐차 할 경우 불이익이 있나요?", "관허 폐차장이 아닌 곳(폐차대행업체, 폐차브로커 등)에 폐차를 신청할 경우 정상적으로 말소등록이 되지 않아 차주에게 세금이 계속 부과되는 경우가 있고, 폐차대행업자와의 연락이 두절되어 차를 분실하는 등 여러 피해 사례가 속출하고 있으니 꼭 관허 폐차장에 의뢰하시기 바랍니다."],
[2, "본인이 직접 말소하려면 어떻게 해야 하나요?", "말소구비서류(폐차인수증명서, 말소등록신청서)를 지참하여 등록관청에 직접 가셔서 말소신청 하시거나 인터넷 자동차민원 대국민포털(http://www.ecar.go.kr)에서 공인인증서를 이용하여 로그인 하신 후 신청하실 수 있습니다."],
[3, "자동차 보험은 어떻게 처리해야 하나요?", "말소등록 후 말소사실증명서를 발급 받아 보험회사로부터 남은 보험료를 환급 받거나 새 차로 이전이 가능합니다."],
[4, "폐차가 제대로 됐는지 어떻게 확인하나요?", "폐차가 처리되었다는 증명서인 폐차인수증명서를 발급받아 확인하시면 됩니다. 만약 말소등록신청대행을 폐차장에 신청하셨다면 말소완료 이후 등록관청에서 말소사실증명서를 발급받아 확인하실 수 있고 인터넷 자동차민원 대국민포털(http://www.ecar.go.kr)에서도 확인 가능합니다."],
[5, "폐차 할 수 있는 지역이 정해져 있나요?", "폐차는 전 지역에서 가능하니 계신 곳 가까운 관허 폐차장에 문의하시면 됩니다."],
[6, "본인이 차주가 아닌 경우 어떻게 폐차하나요?", "폐차 시 본인이 아닌 경우 차량등록증/차주 인감증명서/대리인 신분증 이 필요합니다."],
[7, "압류나 저당이 설정되어 있을 때도 폐차가 가능한가요?", "저당이나 압류가 설정되어 있더라도 차령이 아래와 같은 기준 이상이면 말소등록신청이 가능합니다. (경형, 소형: 8년 이상) (중형, 대형의 승용 및 승합차: 10년 이상) (중형, 대형의 화물 및 특수차: 12년 이상)"],
[8, "폐차를 맡기고 폐차장에서 받아둬야 할 서류는 무엇인가요?", "폐차를 관허폐차장에 맡기시고 필요한 서류를 모두 제출하셨다면 폐차인수증명서를 폐차장으로부터 발급 받으셔야합니다. 본인이 직접 자동차 말소등록을 등록관청에 신청하시려면 폐차인수증명서가 필요하오니 잘 보관하셨다가 말소등록시 제출하시고, 폐차장에 말소대행을 요청하셨다면 폐차인수증명서를 받으실 필요 없이 폐차장에서 말소등록신청과정을 다 마친 후 말소완료가 되었다는 소식을 전달받으실 때까지 기다리시면 됩니다."],
[9, "폐차장이 관허업체인지 어떻게 확인하나요?", "저희 협회에는 전국 관허폐차장이 모두 등록되어 있으며 저희 홈페이지에서 검색되지 않으면 관허폐차장이 아니오니 폐차신청 시 유의하셔야 합니다."],
[10, "폐차 말소까지 몇 일정도 소요되나요?", "일반 폐차 말소의 경우 1~3일, 차령초과 말소의 경우 한 달 이상 소요 됩니다."],
[11, "폐차 시 비용은 얼마가 드나요?", "폐차 시 별도로 차주님께서 지불하셔야 할 비용은 없습니다. 그리고 폐자동차의 차종, 연식에 따라 폐차장으로부터 소정의 금액을 폐차 고철비용으로 받으실 수 있습니다."],
[12, "폐차절차는 어떻게 되나요?", "관허폐차장에 폐차신청을 하면 다음과 같은 정상적인 절차를  거치게 됩니다. [1. 폐차신청   2. 원부조회(저당이나 압류가 있는지 확인)    3. 무료 견인 및 입고    4. 폐차장에서 폐차인수증명서 발급   5. 등록관청에 말소등록신청 (본인 또는 폐차장대행)   6. 말소등록 완료]"],
[13, "폐차시 구비서류는?", "폐차시 구비서류 개인일 경우 : 자동차등록증, 신분증, 인감증명서(대행인일 경우)   법인일 경우 :  자동차등록증, 신분증, 법인인감증명서, 사업자등록증 혹은 법인등기부등본"]

]

insert_sql = "REPLACE INTO FAQ (id, question, answer) VALUES (%s, %s, %s)"
cur.executemany(insert_sql, datas)
conn.commit()
cur.close()
conn.close()